<!-- The results page for the actors search. Shows results based on filter from page. Rendered through django-tables2 -->

{% extends "frankenstein_mobile/base.html" %}
{% block content %}
{% load static %}

<div class="container">
	<h1>Results</h1>
	<div id="theResults">
		
	</div> 


</div>

<script type="text/javascript">
		// get the data from the json object
		var data = {{ results|safe }};

		// get how many actors there are
		var actor_length = data.performance_actors.length;

		// if there are no actors
		if(actor_length == 0 ) {
			// write no results try again
		}
		// if there are actors (query is successful)
		if(actor_length > 0) {

			// the main panel group div
			var panelgroup = document.createElement("div");
			panelgroup.id = "accordion";
			panelgroup.className = "panel-group";

			// add it to the main results page
			var res = document.getElementById("theResults");
			res.appendChild(panelgroup);

			for (var i = 0; i < actor_length; i++) {

				var pdefault = document.createElement("div");
				pdefault.className = "panel panel-default";

				var panelheading = document.createElement("div");
				panelheading.className = "panel-heading";

				var ptitle = document.createElement("h4");
				ptitle.className = "panel-title";

				var header = document.createElement("a")
				header.setAttribute("data-toggle", "collapse");
				header.setAttribute("data-parent", "#accordion");
				header.setAttribute("href", "#"+i);

				var headerText = document.createElement("div");
				headerText.innerHTML = data.performance_actors[i].actor_name;

				panelgroup.appendChild(pdefault);
				pdefault.appendChild(panelheading);
				panelheading.appendChild(ptitle);
				ptitle.appendChild(header);
				header.appendChild(headerText);

				var panelCollapse = document.createElement("div");
				panelCollapse.id = i;
				panelCollapse.className = "panel-collapse collapse";

				var panelbody = document.createElement("div");
				panelbody.className = "panel-body";

				var paneltext = document.createElement("p");
				paneltext.setAttribute("style", "color:white;")
				paneltext.innerHTML = 
					"<strong>Bio:</strong> " + data.performance_actors[i].actor_bio
					+"<br>\
					<strong>Role:</strong> " + data.performance_actors[i].actor_role
					+"<br>\
					<br>\
					<strong>Performance:</strong> " + data.performance_info
					+"<br>\
					<strong>Performance Start Time:</strong> " + data.performance_start_time
					+"<br>\
					<strong>Stage Location:</strong> " + data.performance_stage.stage_location
					+"<br>\ <strong>"
					+ data.performance_actors[i].actor_name +"'s " + "Appearance Time:</strong> " + data.performance_actors[i].appearance_time
					;

				panelgroup.appendChild(panelCollapse);
				panelCollapse.appendChild(panelbody);
				panelbody.appendChild(paneltext);
			}

		}

		</script>


		{% endblock %}